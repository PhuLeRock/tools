# this sample config for frontend use different port 7001(for vnext code) and 7000 (for wordpress code)
# auto-generated by synapse at 2015-06-12 21:42:24 +0000

global
        chroot /var/lib/haproxy
        user haproxy
        group haproxy
        daemon
defaults
        contimeout 5000
        clitimeout 50000
        srvtimeout 50000
        balance roundrobin

frontend vnext
        mode http
        bind 0.0.0.0:7001
        default_backend vnext

backend vnext
        mode http
        option httpchk /health
        http-check expect string OK
        server 100.79.122.133:5004_localhost 100.79.122.133:5004 cookie 100.79.122.133:5004_localhost
        server 100.79.122.133:5003_localhost 100.79.122.133:5003 cookie 100.79.122.133:5003_localhost

frontend wordpress
        mode http
        bind 0.0.0.0:7000
        default_backend wordpress

backend wordpress
        mode http
        option httpchk /health
        http-check expect string OK
        server 100.79.122.133:11021_localhost 100.79.122.133:11021 cookie 100.79.122.133:11021_localhost
        server 100.79.122.133:11023_localhost 100.79.122.133:11023 cookie 100.79.122.133:11023_localhost